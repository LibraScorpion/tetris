# 俄罗斯方块游戏设计文档

## 1. 游戏功能描述

### 1.1 基本玩法
- 不同形状的方块从顶部落下
- 玩家可以控制方块左右移动和旋转
- 当一行被填满时,该行消除并获得分数
- 当方块堆到顶部时游戏结束

### 1.2 核心功能
- 方块的自动下落
- 方块的移动控制(左、右、下)
- 方块的旋转
- 碰撞检测
- 消行判定
- 分数计算
- 游戏状态控制(开始、暂停、结束)
- 下一个方块预览

## 2. 技术选型

### 2.1 前端技术
- HTML5 Canvas: 用于游戏主体渲染
- JavaScript: 实现游戏逻辑
- CSS: 页面布局和样式

### 2.2 开发工具
- Visual Studio Code
- Chrome DevTools

## 3. 核心模块设计

### 3.1 Game 核心游戏类
- 负责游戏主循环
- 状态管理
- 计分系统

### 3.2 Board 游戏板类
- 维护游戏网格数据
- 处理方块碰撞检测
- 处理消行逻辑

### 3.3 Tetromino 方块类
- 定义方块形状
- 处理方块旋转
- 处理方块移动

### 3.4 Renderer 渲染类
- 负责游戏画面渲染
- 处理动画效果

## 4. 数据结构设计

### 4.1 游戏板数据结构
```javascript
board = [
  [0,0,0,...], // 0表示空格
  [0,1,1,...], // 1表示已占用
  ...
]
```

### 4.2 方块数据结构
```javascript
tetromino = {
  shape: [[1,1,1,1]], // I形方块示例
  x: 0,  // 当前x坐标
  y: 0,  // 当前y坐标
  rotation: 0 // 当前旋转状态
}
```

### 4.3 游戏状态数据
```javascript
gameState = {
  score: 0,
  level: 1,
  isGameOver: false,
  isPaused: false
}
```

## 5. UI界面设计

### 5.1 主要界面元素
- 游戏主画布(Canvas)
- 分数显示区
- 下一个方块预览区
- 游戏控制按钮(开始/暂停)
- 游戏等级显示

### 5.2 布局设计
- 左侧: 游戏主画布
- 右侧: 游戏信息面板(分数、等级、下一个方块)
- 底部: 游戏控制按钮

## 6. 键盘控制设计
- 左箭头: 方块左移
- 右箭头: 方块右移
- 下箭头: 方块加速下落
- 上箭头: 方块旋转
- 空格键: 暂停/继续游戏

## 7. 游戏参数设计
- 游戏板大小: 10x20格
- 方块下落速度: 初始1秒/格
- 消行得分: 单行100分,多行翻倍
- 等级提升: 每1000分升一级
- 速度提升: 每升一级速度提升10%